<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Il viaggio del codice nel browser</title>
  </head>
  <body>
    <!--

    # **1. Introduzione - Il viaggio del codice nel browser**

Quando apri una pagina web, il browser segue una **sequenza precisa**:

1. Legge lâ€™HTML *riga per riga*
2. Costruisce il **DOM**
3. Carica il CSS e costruisce il **CSSOM**
4. Se tutto Ã¨ pronto â†’ crea il **Render Tree**
5. Nel frattempo deve anche capire **cosa fare con gli `<script>`**

Ma oggi gli script non sono tutti uguali:

- Script *tradizionali*
- Script con `defer`
- Script con `async`
- Script con `type="module"`
- Script con `nomodule`

**Cosa succede davvero** dietro le quinte?
[1] Browser scarica HTML
     â”‚
[2] Inizia a leggerlo dallâ€™alto verso il basso
     â”‚
[3] Incontra <link rel="stylesheet">
     â”œâ”€> scarica CSS in parallelo
     â””â”€> costruisce CSSOM quando pronti
     â”‚
[4] Incontra <script> (diversi comportamenti!)
     â”‚
[5] Quando DOM + CSSOM pronti â†’ Render Tree
     â”‚
[6] Esecuzione JS finale + interattivitÃ 




[1] Browser scarica HTML
     â”‚
[2] Inizia a leggerlo dallâ€™alto verso il basso
     â”‚
[3] Incontra <link rel="stylesheet">
     â”œâ”€> scarica CSS in parallelo
     â””â”€> costruisce CSSOM quando pronti
     â”‚
[4] Incontra <script> (diversi comportamenti!)
     â”‚
[5] Quando DOM + CSSOM pronti â†’ Render Tree
     â”‚
[6] Esecuzione JS finale + interattivitÃ 



3.1 Script classico (il piÃ¹ "vecchio")

<script src="app.js"></script>

### âš ï¸ Comportamento:

- **Blocca il parsing dellâ€™HTML**
- Il browser deve:
    - fermarsi
    - scaricare lo script
    - eseguirlo
    - riprendere il parsing

Ãˆ come dire:

> â€œFerma tutto! Devo leggere questo file PRIMA di continuare.â€

HTML parsing â”€â”€â– stopâ– â”€â”€â”€â”€ continues
                 â†“
             download JS
                 â†“
             execute JS


------------------------------------------------------------------------------------------

3.2 Script con `defer`

```html
<script defer src="app.js"></script>
```

### âœ”ï¸ Comportamento moderno e ottimale:

- Non blocca lâ€™HTML
- Viene scaricato in parallelo
- Eseguito **solo dopo il DOM**, ma **prima del DOMContentLoaded**
- Mantiene lâ€™ordine

Comportamento:
HTML parsing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º done
JS download â”€â”€parallelâ”€â”€â”€â”€â”€â–º done
JS execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º after DOM ready


------------------------------------------------------------------------------------------

3.3 Script con `async`

```
<script async src="track.js"></script>
```

### âœ”ï¸ Adatto per:

- analytics
- tracker
- script non critici

### â— Comportamento:

- Non blocca lâ€™HTML
- Viene eseguito **appena Ã¨ scaricato**
- Non rispetta lâ€™ordine degli script

Comportamento:
HTML parsing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
JS download â”€parallelâ”€â”€â”€â”€â”€â”€â–º execute immediately!


------------------------------------------------------------------------------------------
4. JavaScript moderno: `type="module"`

```html
<script type="module" src="main.js"></script>
```

## ğŸ‰ Cosa introduce:

- import/export
- scope isolato
- strict mode automatico
- esecuzione *defer by default*
- caching intelligente
- dependency graph (importa altri file JS automaticamente)

Comportamento:
HTML parsing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º done
module download â”€parallelâ”€â”€â”€â–º
module execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º after DOM (like defer)

-->
  </body>
</html>
